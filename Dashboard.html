<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Dashboard — NovaMind</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="dash-wrap">
    <aside class="sidebar glow">
      <img src="assets/logo.png" class="brand" alt="NovaMind logo">
      <nav class="menu">
        <a href="#" class="active">Overview</a>
        <a href="plans.html">Tools</a>
        <a href="settings.html">Settings</a>
        <a id="signout" href="#">Sign out</a>
      </nav>
    </aside>

    <main class="dash-main">
      <header class="dash-header">
        <div>
          <h1>Welcome, <span id="userEmail">—</span></h1>
          <div class="small" id="userMeta">Loading...</div>
        </div>
      </header>

      <section class="cards">
        <div class="card glow">
          <h3>Active session</h3>
          <pre id="sessionPre">Loading session...</pre>
        </div>
        <div class="card glow">
          <h3>Quick tools</h3>
          <ul class="list">
            <li><a href="https://tool1.novomind.in" target="_blank">Tool 1</a></li>
            <li><a href="https://tool2.novomind.in" target="_blank">Tool 2</a></li>
            <li><a href="https://tool3.novomind.in" target="_blank">Tool 3</a></li>
          </ul>
        </div>
      </section>
    </main>
  </div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
<script src="js/supabase-client.js"></script>
<script>
(async function(){
  // require auth
  const { data } = await supabaseClient.auth.getSession();
  const session = data?.session ?? null;
  if(!session){ location.href = 'login.html'; return; }
  document.getElementById('userEmail').textContent = session.user.email ?? '—';
  document.getElementById('userMeta').textContent = `UID: ${session.user.id}`;
  document.getElementById('sessionPre').textContent = JSON.stringify(session, null, 2);

  document.getElementById('signout').addEventListener('click', async (e)=>{
    e.preventDefault();
    await supabaseClient.auth.signOut();
    location.href = 'login.html';
  });
})();
</script>
</body>
</html>
